{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst form = document.querySelector('.search-form');\nconst imagesContainer = document.querySelector('.search-images');\nconst inputForm = document.querySelector('.input-form');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nconst API_KEY = '35210145-a84c43ab2193c18f9a40991ef';\nlet currentPage = 1;\n\nform.addEventListener('submit', handleSubmit);\nloadMoreBtn.addEventListener('click', loadMoreImages);\n\n\nasync function handleSubmit(e) {\n    e.preventDefault();\n    const query = inputForm.value.trim();\n    if (query === '') {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search term.',\n            position: 'topRight'\n        });\n        return;\n    }\n    currentPage = 1; // Скидаємо сторінку до початкового значення при новому пошуковому запиті\n    imagesContainer.innerHTML = ''; // Очищуємо контейнер для зображень\n    await fetchImages(query, currentPage);\n    \n}\n\nasync function fetchImages(query, page) {\n    try {\n        loader.classList.remove('hidden');\n        const BASE_URL = `https://pixabay.com/api/?key=${API_KEY}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}&q=${query}`;\n        const response = await axios.get(BASE_URL);\n        if (response.status !== 200) {\n            throw new Error('Network response was not ok');\n        }\n        const data = response.data;\n        if (data.hits.length === 0) {\n            iziToast.warning({\n                title: 'No Results',\n                message: 'Sorry, there are no images matching your search query. Please try again!'\n            });\n            return;\n        }\n        renderImages(data.hits);\n        if (data.totalHits > page * 15) { // Перевіряємо, чи є ще зображення для завантаження\n            loadMoreBtn.classList.remove('hidden'); // Показуємо кнопку \"Load more\"\n        } else {\n            loadMoreBtn.classList.add('hidden'); // Ховаємо кнопку \"Load more\", якщо всі зображення вже завантажено\n        }\n    } catch (error) {\n        console.error('Error fetching data:', error);\n        iziToast.error({\n            title: 'Error',\n            position: 'topRight',\n            message: 'An error occurred while fetching data. Please try again.'\n        });\n    } finally {\n        loader.classList.add('hidden');\n    }\n}\n\nasync function loadMoreImages() {\n    currentPage++; // Збільшуємо номер сторінки для наступного запиту\n    const query = inputForm.value.trim();\n    await fetchImages(query, currentPage);\n}\nfunction smoothScroll() {\n    const cardHeight = document.querySelector('.photo-card').getBoundingClientRect().height;\n    window.scrollBy({\n        top: cardHeight * 2, // Прокручуємо на дві висоти карточки галереї\n        left: 0,\n        behavior: 'smooth' // Плавна прокрутка\n    });\n}\n\nfunction imageTemplate(image) {\n    return `\n        <div class='photo-card'>\n            <a href='${image.largeImageURL}'>\n                <img src='${image.webformatURL}' alt='${image.tags}' loading='lazy' class='image-gallery' />\n            </a>\n            <div class='info-card'>\n                <p class='info-item'>\n                    <b>Likes</b> ${image.likes}\n                </p>\n                <p class='info-item'>\n                    <b>Views</b> ${image.views}\n                </p>\n                <p class='info-item'>\n                    <b>Comments</b> ${image.comments}\n                </p>\n                <p class='info-item'>\n                    <b>Downloads</b> ${image.downloads}\n                </p>\n            </div>\n        </div>\n    `;\n}\n\nfunction renderImages(images) {\n    const markup = images.map(image => imageTemplate(image)).join('');\n    imagesContainer.insertAdjacentHTML('beforeend', markup);\n    const galleryList = new SimpleLightbox('.search-images .photo-card a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n        enableKeyboard: true,\n        showCounter: false,\n        scrollZoom: false,\n        close: false,\n    });\n    galleryList.refresh();\n\nsmoothScroll();\n}\n"],"names":["form","imagesContainer","inputForm","loader","loadMoreBtn","API_KEY","currentPage","handleSubmit","loadMoreImages","e","query","iziToast","fetchImages","page","BASE_URL","response","axios","data","renderImages","error","smoothScroll","cardHeight","imageTemplate","image","images","markup","SimpleLightbox"],"mappings":"owBAOA,MAAMA,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAkB,SAAS,cAAc,gBAAgB,EACzDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,gBAAgB,EAErDC,EAAU,qCAChB,IAAIC,EAAc,EAElBN,EAAK,iBAAiB,SAAUO,CAAY,EAC5CH,EAAY,iBAAiB,QAASI,CAAc,EAGpD,eAAeD,EAAaE,EAAG,CAC3BA,EAAE,eAAc,EAChB,MAAMC,EAAQR,EAAU,MAAM,KAAI,EAClC,GAAIQ,IAAU,GAAI,CACdC,EAAS,MAAM,CACX,MAAO,QACP,QAAS,8BACT,SAAU,UACtB,CAAS,EACD,MACH,CACDL,EAAc,EACdL,EAAgB,UAAY,GAC5B,MAAMW,EAAYF,EAAOJ,CAAW,CAExC,CAEA,eAAeM,EAAYF,EAAOG,EAAM,CACpC,GAAI,CACAV,EAAO,UAAU,OAAO,QAAQ,EAChC,MAAMW,EAAW,gCAAgCT,8EAAoFQ,OAAUH,IACzIK,EAAW,MAAMC,EAAM,IAAIF,CAAQ,EACzC,GAAIC,EAAS,SAAW,IACpB,MAAM,IAAI,MAAM,6BAA6B,EAEjD,MAAME,EAAOF,EAAS,KACtB,GAAIE,EAAK,KAAK,SAAW,EAAG,CACxBN,EAAS,QAAQ,CACb,MAAO,aACP,QAAS,0EACzB,CAAa,EACD,MACH,CACDO,EAAaD,EAAK,IAAI,EAClBA,EAAK,UAAYJ,EAAO,GACxBT,EAAY,UAAU,OAAO,QAAQ,EAErCA,EAAY,UAAU,IAAI,QAAQ,CAEzC,OAAQe,EAAP,CACE,QAAQ,MAAM,uBAAwBA,CAAK,EAC3CR,EAAS,MAAM,CACX,MAAO,QACP,SAAU,WACV,QAAS,0DACrB,CAAS,CACT,QAAc,CACNR,EAAO,UAAU,IAAI,QAAQ,CAChC,CACL,CAEA,eAAeK,GAAiB,CAC5BF,IACA,MAAMI,EAAQR,EAAU,MAAM,KAAI,EAClC,MAAMU,EAAYF,EAAOJ,CAAW,CACxC,CACA,SAASc,GAAe,CACpB,MAAMC,EAAa,SAAS,cAAc,aAAa,EAAE,sBAAuB,EAAC,OACjF,OAAO,SAAS,CACZ,IAAKA,EAAa,EAClB,KAAM,EACN,SAAU,QAClB,CAAK,CACL,CAEA,SAASC,EAAcC,EAAO,CAC1B,MAAO;AAAA;AAAA,uBAEYA,EAAM;AAAA,4BACDA,EAAM,sBAAsBA,EAAM;AAAA;AAAA;AAAA;AAAA,mCAI3BA,EAAM;AAAA;AAAA;AAAA,mCAGNA,EAAM;AAAA;AAAA;AAAA,sCAGHA,EAAM;AAAA;AAAA;AAAA,uCAGLA,EAAM;AAAA;AAAA;AAAA;AAAA,KAK7C,CAEA,SAASL,EAAaM,EAAQ,CAC1B,MAAMC,EAASD,EAAO,IAAID,GAASD,EAAcC,CAAK,CAAC,EAAE,KAAK,EAAE,EAChEtB,EAAgB,mBAAmB,YAAawB,CAAM,EAClC,IAAIC,EAAe,+BAAgC,CACnE,aAAc,MACd,aAAc,IACd,eAAgB,GAChB,YAAa,GACb,WAAY,GACZ,MAAO,EACf,CAAK,EACW,QAAO,EAEvBN,GACA"}